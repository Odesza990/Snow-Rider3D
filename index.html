<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Snow Rider 3D - Thrilling Skiing Adventure Game</title>
    <meta name="description" content="Immerse yourself in Snow Rider 3D, a thrilling skiing adventure game set in breathtaking mountain landscapes. Ride your sleigh down snowy slopes, dodge obstacles, and collect gifts for an exhilarating experience.">
    <meta name="theme-color" content="#007ACC">
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Your Name">
    <meta name="keywords" content="Snow Rider 3D, skiing game, winter sports, snowboarding, ski game, mountain landscapes, skiing adventure, snowboarding adventure, snowy mountain, sleigh ride, winter game">
    <script>
        // === è¶…æ—©æœŸå¼ºåˆ¶é˜²æŠ¤ï¼šåœ¨ä»»ä½•è„šæœ¬åŠ è½½å‰æ‹¦æˆª ===
        console.log("ğŸ›¡ï¸ éƒ¨ç½²è¶…æ—©æœŸé˜²æŠ¤ç³»ç»Ÿ...");

        // 1. å®Œå…¨ç¦ç”¨ window.open - æœ€å¼ºç¡¬çš„æ‹¦æˆª
        window.open = function() {
            console.warn("ğŸš« å·²å¼ºåˆ¶é˜»æ­¢ window.open è°ƒç”¨:", arguments[0] || "unknown");
            console.trace("è°ƒç”¨å †æ ˆ:");
            return {
                focus: function(){},
                blur: function(){},
                close: function(){},
                closed: false,
                location: { href: "" },
                document: { write: function(){} }
            }; // è¿”å›å‡çª—å£å¯¹è±¡é¿å…è„šæœ¬æŠ¥é”™
        };

        // 2. å†»ç»“ window.open é˜²æ­¢è¢«é‡æ–°èµ‹å€¼
        try {
            Object.defineProperty(window, 'open', {
                value: window.open,
                writable: false,
                configurable: false
            });
            console.log("âœ… window.open å·²è¢«æ°¸ä¹…é”å®š");
        } catch(e) {
            console.warn("âš ï¸ æ— æ³•é”å®š window.open:", e.message);
        }

        // 3. æ‹¦æˆªæ‰€æœ‰å¯èƒ½çš„è·³è½¬æ–¹æ³•
        const blockRedirect = function(method, url) {
            console.warn("ğŸš« å·²é˜»æ­¢", method, "è·³è½¬åˆ°:", url);
            return false;
        };

        // é‡å†™ location æ–¹æ³•
        const originalLocation = window.location;
        window.location.replace = function(url) { return blockRedirect("location.replace", url); };
        window.location.assign = function(url) { return blockRedirect("location.assign", url); };

        // 4. ç›‘å¬æ‰€æœ‰ç‚¹å‡»äº‹ä»¶å¹¶å¼ºåˆ¶é˜»æ­¢è·³è½¬
        document.addEventListener('click', function(event) {
            console.log("ğŸ” æ‹¦æˆªç‚¹å‡»:", event.target.tagName);

            // å¼ºåˆ¶é˜»æ­¢æ‰€æœ‰å¯ç–‘ç‚¹å‡»
            setTimeout(() => {
                const currentUrl = window.location.href;
                if (currentUrl.includes('cmug') || currentUrl.includes('gitlab.io') ||
                    currentUrl !== originalLocation.href) {
                    console.error("ğŸš¨ æ£€æµ‹åˆ°æ¶æ„è·³è½¬ï¼Œå¼ºåˆ¶é˜»æ­¢ï¼");
                    window.stop();
                    window.history.back();
                }
            }, 1);
        }, true);

        // 5. æ¯50msç›‘æ§URLå˜åŒ–
        let lastHref = window.location.href;
        const urlMonitor = setInterval(() => {
            if (window.location.href !== lastHref) {
                if (window.location.href.includes('cmug') || window.location.href.includes('gitlab.io')) {
                    console.error("ğŸš¨ URLç›‘æ§ï¼šæ£€æµ‹åˆ°æ¶æ„è·³è½¬ï¼Œç«‹å³é˜»æ­¢ï¼");
                    window.stop();
                    window.history.back();
                    // å¼ºåˆ¶æ¢å¤åŸURL
                    try {
                        originalLocation.replace(lastHref);
                    } catch(e) {
                        console.warn("æ— æ³•æ¢å¤åŸURL");
                    }
                } else {
                    lastHref = window.location.href;
                }
            }
        }, 50);

        // 6. ä¸“é—¨æ‹¦æˆªå‘ç°çš„å¹¿å‘ŠSDK
        const blockAdSDK = function(sdkName, method) {
            console.warn("ğŸš« å·²é˜»æ­¢å¹¿å‘ŠSDKè°ƒç”¨:", sdkName, method);
            return false;
        };

        // æ‹¦æˆª GameDistribution SDK
        window.gdsdk = window.gdsdk || {};
        window.gdsdk.showAd = function() { return blockAdSDK("GameDistribution", "showAd"); };

        // æ‹¦æˆª ubg235 commercial ç³»ç»Ÿ
        window.ubg235 = window.ubg235 || {};
        window.ubg235.commercial = window.ubg235.commercial || {};
        window.ubg235.commercial.ADS = function() { return blockAdSDK("ubg235", "commercial.ADS"); };

        // 7. æ‹¦æˆªæ‰€æœ‰å¯èƒ½çš„å¹¿å‘Šç›¸å…³å…¨å±€å¯¹è±¡
        const adBlacklist = ['gdsdk', 'ubg235', 'commercial', 'showAd', 'openGame'];
        adBlacklist.forEach(adObj => {
            if (window[adObj] && typeof window[adObj] === 'object') {
                for (let method in window[adObj]) {
                    if (typeof window[adObj][method] === 'function') {
                        window[adObj][method] = function() {
                            return blockAdSDK(adObj, method);
                        };
                    }
                }
            }
        });

        console.log("âœ… è¶…æ—©æœŸé˜²æŠ¤ç³»ç»Ÿå·²æ¿€æ´»ï¼Œæ‰€æœ‰è·³è½¬å°†è¢«å¼ºåˆ¶é˜»æ­¢ï¼");
    </script>
    <script src="TemplateData/UnityProgress.js"></script>
    <script src="Build/UnityLoader.js"></script>
    <script>
        // === æ­£å¸¸æ¸¸æˆåˆå§‹åŒ– ===
        var gameInstance = UnityLoader.instantiate("gameContainer", "Build/SnowRider3D-gd-1.json", {onProgress: UnityProgress,Module:{onRuntimeInitialized: function() {UnityProgress(gameInstance, "complete")}}});
    </script>
</head>
<body style="overflow:hidden;padding:0px;margin:0px;">
    <div class="webgl-content">
        <div id="gameContainer" style="width: 960px; height: 600px; margin: auto"></div>
    </div>
</body>
</html>

