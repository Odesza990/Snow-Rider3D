<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Snow Rider 3D - Thrilling Skiing Adventure Game</title>
    <meta name="description" content="Immerse yourself in Snow Rider 3D, a thrilling skiing adventure game set in breathtaking mountain landscapes. Ride your sleigh down snowy slopes, dodge obstacles, and collect gifts for an exhilarating experience.">
    <meta name="theme-color" content="#007ACC">
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Your Name">
    <meta name="keywords" content="Snow Rider 3D, skiing game, winter sports, snowboarding, ski game, mountain landscapes, skiing adventure, snowboarding adventure, snowy mountain, sleigh ride, winter game">
    <script>
        // 精确拦截恶意脚本加载
        (function() {
            const originalFetch = window.fetch;
            const originalXHROpen = XMLHttpRequest.prototype.open;
            const originalCreateElement = document.createElement;

            // 拦截 fetch 请求
            window.fetch = function(url, ...args) {
                if (typeof url === 'string' && (url.includes('gd-sdk.js') || url.includes('pages.dev/patch'))) {
                    console.warn('🚫 已阻止恶意脚本请求:', url);
                    return Promise.reject(new Error('Blocked malicious script'));
                }
                return originalFetch.call(this, url, ...args);
            };

            // 拦截 XMLHttpRequest
            XMLHttpRequest.prototype.open = function(method, url, ...args) {
                if (typeof url === 'string' && (url.includes('gd-sdk.js') || url.includes('pages.dev/patch'))) {
                    console.warn('🚫 已阻止恶意 XHR 请求:', url);
                    url = 'data:text/javascript,'; // 空脚本
                }
                return originalXHROpen.call(this, method, url, ...args);
            };

            // 拦截动态脚本创建
            document.createElement = function(tagName) {
                const element = originalCreateElement.call(this, tagName);
                if (tagName.toLowerCase() === 'script') {
                    const originalSetSrc = Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype, 'src').set;
                    Object.defineProperty(element, 'src', {
                        set: function(value) {
                            if (typeof value === 'string' && (value.includes('gd-sdk.js') || value.includes('pages.dev/patch'))) {
                                console.warn('🚫 已阻止恶意脚本 src:', value);
                                return; // 不设置 src
                            }
                            originalSetSrc.call(this, value);
                        },
                        get: function() {
                            return this.getAttribute('src') || '';
                        }
                    });
                }
                return element;
            };

            console.log('✅ 恶意脚本拦截器已启动');
        })();
    </script>
    <script src="TemplateData/UnityProgress.js"></script>
    <script src="Build/UnityLoader.js"></script>
    <script>
        // === 正常游戏初始化 ===
        var gameInstance = UnityLoader.instantiate("gameContainer", "Build/SnowRider3D-gd-1.json", {onProgress: UnityProgress,Module:{onRuntimeInitialized: function() {UnityProgress(gameInstance, "complete")}}});
    </script>
</head>
<body style="overflow:hidden;padding:0px;margin:0px;">
    <div class="webgl-content">
        <div id="gameContainer" style="width: 960px; height: 600px; margin: auto"></div>
    </div>
</body>
</html>

